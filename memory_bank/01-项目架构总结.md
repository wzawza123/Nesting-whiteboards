# 嵌套白板项目代码架构总结

## 项目概述

这是一个基于AntV G6的嵌套白板应用，支持矩形节点、文本节点、图片节点的创建和编辑，以及子图的管理。项目采用模块化架构，核心亮点是每个**节点**都是一个**子图**，双击可查看细节。

## 技术栈

- **AntV G6** (v4.8.24) - 图形可视化引擎
- **React** (v19.1.1) + **Ant Design** (v5.27.4) - 用于图片预览组件
- **Vite** (v5.0.0) - 构建工具
- **原生JavaScript ES6+** - 主要开发语言

## 项目结构

### 核心文件
- `src/index.js` - 应用入口，初始化G6图形实例和各个模块
- `src/config.js` - 全局配置文件，包含节点样式、图形配置、颜色等
- `index.html` - 入口HTML文件
- `package.json` - 项目依赖配置

### 主要模块

#### 1. Components (React组件)
- `src/components/ImagePreview.jsx` - 图片预览组件

#### 2. Events (事件处理机制)
- `src/events/` - 包含节点、边、画布、粘贴、调整大小等事件处理

#### 3. Nodes (自定义节点类型)
- `src/nodes/` - 包含矩形、文本、图片节点的实现

#### 4. IO (文件管理)
- `src/io/` - 文件保存和加载功能

#### 5. Toolbar (工具栏)
- `src/toolbar/` - 工具栏实现，提供添加节点、删除、保存等功能

#### 6. Navigation (导航功能)
- `src/navigation/` - 支持子图的进入和返回

#### 7. ContextMenu (右键菜单)
- `src/contextMenu/` - 右键菜单功能，支持文本编辑、字体大小、颜色修改

#### 8. Styles (样式)
- `src/styles/index.css` - 全局CSS样式文件

## 核心特性

1. **嵌套子图** - 每个矩形节点都可以包含子图，支持无限层级嵌套
2. **多种节点类型** - 矩形、文本、图片三种节点类型
3. **丰富的交互** - 拖拽、缩放、编辑、右键菜单等
4. **文件管理** - 完整的保存/加载功能，支持现代浏览器API
5. **导航系统** - 清晰的层级导航和路径显示
6. **快捷键支持** - 全面的键盘快捷键操作

## 模块依赖关系

```
index.js (入口)
├── G6.Graph (核心图形实例)
├── Navigation (导航管理)
├── ContextMenu (右键菜单)
├── Toolbar (工具栏)
├── FileManager (文件管理)
├── Events (事件绑定)
└── Nodes (节点注册)
```

所有模块都围绕G6.Graph实例进行设计，通过事件系统进行模块间通信。
